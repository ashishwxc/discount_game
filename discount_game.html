<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Spin & Win</title>

<style>
body{
  margin:0;
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  font-family:Arial,sans-serif;
  background:linear-gradient(135deg,#ffecd2,#fcb69f);
  overflow:hidden;
}

.overlay{
  background:white;
  padding:32px 28px;
  border-radius:14px;
  max-width:90%;
  text-align:center;
  box-shadow:0 8px 30px rgba(0,0,0,.25);
}

button{
  padding:14px 26px;
  font-size:18px;
  border-radius:8px;
  border:none;
  background:#ff7a00;
  color:white;
  cursor:pointer;
}

button:disabled{
  background:#ccc;
  cursor:not-allowed;
}

#slot{
  font-size:42px;
  margin-top:20px;
}

#result{
  font-size:26px;
  font-weight:bold;
  color:green;
  margin-top:10px;
  opacity:0;
}

#code{
  font-size:18px;
  margin-top:8px;
  font-weight:bold;
  opacity:0;
}

.confetti{
  position:fixed;
  width:10px;
  height:10px;
  top:-10px;
  animation:fall linear forwards;
}

@keyframes fall{
  to{
    transform:translateY(110vh) rotate(360deg);
    opacity:0;
  }
}
</style>
</head>

<body>

<div class="overlay">
  <h2>ðŸŽ‰ Spin & Win ðŸŽ‰</h2>

  <button id="btn" onclick="startGame()">Get Your Reward</button>

  <div id="slot">ðŸŽ°</div>
  <div id="result"></div>
  <div id="code"></div>

  <p style="font-size:14px">Show this screen to staff</p>
</div>

<!-- ðŸ”Š SOUND FILE -->
<audio id="winSound" src="win-sound.mp3" preload="auto"></audio>

<script>
// ======================
// DAILY LOCK
// ======================
const STORAGE_KEY="playedDate";
const todayKey=new Date().toISOString().split("T")[0];

// ======================
// REWARD TIERS
// ======================
const COMMON=[
 {text:"5% OFF",code:"UA-5FQ9A2"},
 {text:"6% OFF",code:"UA-6M3KQ8"},
 {text:"7% OFF",code:"UA-7A2F9M"},
 {text:"8% OFF",code:"UA-8Q5M2A"},
 {text:"9% OFF",code:"UA-9F2KQ7"},
 {text:"10% OFF",code:"UA-7B3M9Q"},
 {text:"11% OFF",code:"UA-K8F2A6"},
 {text:"12% OFF",code:"UA-9Q4L2X"},
 {text:"13% OFF",code:"UA-M5A7C8"},
 {text:"14% OFF",code:"UA-2XQ9F4"}
];

const RARE=[
 {text:"15% OFF",code:"UA-8L6K3M"},
 {text:"16% OFF",code:"UA-F4Q7A9"},
 {text:"17% OFF",code:"UA-6C2X8L"}
];

const ULTRA_RARE=[
 {text:"18% OFF",code:"UA-Q9M5F2"},
 {text:"19% OFF",code:"UA-A7L4K6"},
 {text:"20% OFF",code:"UA-3F8Q9X"},
 {text:"ðŸ Buy 1 Get 1 Free Pasta",code:"UA-PB7X2L"},
 {text:"ðŸ¥¤ Free 500ml Main",code:"UA-M5Q8A2"},
 {text:"ðŸ¹ Free Homemade Iced Tea",code:"UA-T9F3KQ"},
 {text:"â˜• Free Iced Americano",code:"UA-A7M2QX"}
];

// ======================

const btn=document.getElementById("btn");
const slot=document.getElementById("slot");
const result=document.getElementById("result");
const codeEl=document.getElementById("code");
const sound=document.getElementById("winSound");

// Lock if already played today
if(localStorage.getItem(STORAGE_KEY)===todayKey){
  btn.disabled=true;
  result.style.opacity=1;
  result.innerText="âŒ Already used today";
}

// ======================

function startGame(){
  btn.disabled=true;
  spin();
}

function spin(){
  let spins=25;
  const i=setInterval(()=>{
    slot.innerText=Math.floor(Math.random()*50+1);
    spins--;
    if(spins===0){
      clearInterval(i);
      showReward();
    }
  },100);
}

// ======================
// WEIGHTED PICK
// 70% Common
// 20% Rare
// 10% Ultra Rare
// ======================
function weightedPick(){
  const roll=Math.random();
  if(roll<0.70) return COMMON[Math.floor(Math.random()*COMMON.length)];
  if(roll<0.90) return RARE[Math.floor(Math.random()*RARE.length)];
  return ULTRA_RARE[Math.floor(Math.random()*ULTRA_RARE.length)];
}

// ======================

function showReward(){
  localStorage.setItem(STORAGE_KEY,todayKey);

  const reward=weightedPick();

  slot.innerText="ðŸŽ‰";
  result.innerText="ðŸŽŠ "+reward.text;
  codeEl.innerText="ðŸ§¾ Code: "+reward.code;

  result.style.opacity=1;
  codeEl.style.opacity=1;

  sound.currentTime=0;
  sound.play();

  startConfetti();
}

// ======================

function startConfetti(){
  setInterval(()=>{
    for(let i=0;i<6;i++){
      const c=document.createElement("div");
      c.className="confetti";
      c.style.left=Math.random()*100+"vw";
      c.style.backgroundColor=`hsl(${Math.random()*360},100%,50%)`;
      c.style.animationDuration=(Math.random()*2+2)+"s";
      document.body.appendChild(c);
      setTimeout(()=>c.remove(),4000);
    }
  },700);
}
</script>

</body>
</html>
