<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Umami & Aroma Rewards</title>

<style>
body{
background:#f5f5f5;
font-family:Arial;
display:flex;
justify-content:center;
align-items:center;
height:100vh;
}

.box{
background:#fff;
padding:25px;
width:90%;
max-width:400px;
border-radius:15px;
text-align:center;
box-shadow:0 0 15px #ccc;
}

input,button{
width:100%;
padding:14px;
margin-top:10px;
font-size:16px;
}

button{background:gold;border:none;font-weight:bold;}

#result{font-size:22px;color:green;margin-top:10px;}
#code{font-size:18px;}
</style>
</head>

<body>

<div class="box">

<div id="phoneScreen">
<h2>Umami & Aroma Rewards</h2>
<input id="phone" placeholder="Enter Mobile Number">
<button onclick="start()">Continue</button>
</div>

<div id="gameScreen" style="display:none">

<button id="spinBtn" onclick="spin()">Spin</button>

<div id="result"></div>
<div id="code"></div>

</div>

</div>

<script>

var SCRIPT_URL="https://script.google.com/macros/s/AKfycbwGs4aNFvnstAb2ZIv2x1wuJN-IFtLwmQ0lWUVmVSUtoGdsUMBgW973QC0UNAgQD_gV/exec";

var prizes=[
{text:"10% OFF",code:"UA-10"},
{text:"Free Iced Tea",code:"UA-TEA"},
{text:"Buy 1 Get 1 Pasta",code:"UA-PASTA"}
];

var phone="";

function start(){

 phone=document.getElementById("phone").value.trim();

 fetch(SCRIPT_URL+"?action=spin&phone="+phone)
 .then(r=>r.text())
 .then(res=>{
   if(res==="ALREADY_PLAYED"){
     alert("Already played today");
   }else{
     document.getElementById("phoneScreen").style.display="none";
     document.getElementById("gameScreen").style.display="block";
   }
 });
}

function spin(){

 document.getElementById("spinBtn").disabled=true;

 var p = prizes[Math.floor(Math.random()*prizes.length)];
 document.getElementById("result").innerText=p.text;
 document.getElementById("code").innerText="Code: "+p.code;
}

</script>

</body>
</html>
