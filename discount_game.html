<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Win Your Reward</title>

<style>
body{
font-family:Arial;
background:linear-gradient(135deg,#ffecd2,#fcb69f);
display:flex;
justify-content:center;
align-items:center;
height:100vh;
margin:0;
text-align:center;
}

.box{
background:#fff;
padding:25px;
width:350px;
border-radius:16px;
box-shadow:0 10px 30px rgba(0,0,0,.3);
}

.hidden{display:none;}

button{
width:100%;
padding:12px;
margin-top:10px;
background:#ff7a18;
border:none;
color:white;
border-radius:8px;
font-size:16px;
cursor:pointer;
}

button:disabled{background:#ccc;}

input{
width:100%;
padding:10px;
margin-top:10px;
border-radius:6px;
border:1px solid #ccc;
text-align:center;
}

#slot{font-size:32px;margin:20px 0;}
#result{font-size:20px;color:green;font-weight:bold;white-space:pre-line;}

.pinBox{
background:#000;
color:#fff;
padding:10px;
border-radius:8px;
letter-spacing:3px;
margin-top:10px;
}

.whatsapp{background:#25D366;}
</style>
</head>

<body>

<div class="box">

<!-- STEP 1 -->
<div id="stepMobile">
<h2>Enter Your Mobile Number</h2>
<input id="mobileInput" placeholder="e.g. 0501234567">
<button id="continueBtn">Continue</button>
</div>

<!-- STEP 2 -->
<div id="stepSpin" class="hidden">

<h2>ðŸŽ° Spin & Win</h2>

<button id="spinBtn">Spin</button>

<div id="slot">ðŸŽ°</div>
<div id="result"></div>

<div id="pinBox" class="pinBox hidden"></div>

<button id="waBtn" class="whatsapp hidden">
Order via WhatsApp
</button>

</div>

</div>

<script>
// ===== COUPONS =====
const COMMON=[
{text:"10% OFF",code:"UA-7B3M9Q"},
{text:"11% OFF",code:"UA-K8F2A6"},
{text:"12% OFF",code:"UA-9Q4L2X"},
{text:"13% OFF",code:"UA-M5A7C8"},
{text:"14% OFF",code:"UA-2XQ9F4"},
{text:"ðŸ¹ Free Iced Tea",code:"UA-T9F3KQ"},
{text:"â˜• Free Iced Americano",code:"UA-A7M2QX"},
{text:"Buy Burger + Fries Free",code:"UA-BG7K2"},
{text:"Buy Sandwich + Drink Free",code:"UA-SD9M3"},
{text:"Buy 2 Beverages Get 1",code:"UA-B21QX"},
{text:"Get Free Fries",code:"UA-FR88Q"}
];

const RARE=[
{text:"16% OFF",code:"UA-F4Q7A9"},
{text:"17% OFF",code:"UA-6C2X8L"},
{text:"18% OFF",code:"UA-Q9M5F2"}
];

const ULTRA=[
{text:"ðŸ Buy 1 Get 1 Pasta",code:"UA-PB7X2L"}
];

const WHATSAPP_LINK="https://wa.me/c/918130173042";

// ===== ELEMENTS =====
const stepMobile=document.getElementById("stepMobile");
const stepSpin=document.getElementById("stepSpin");
const continueBtn=document.getElementById("continueBtn");
const mobileInput=document.getElementById("mobileInput");

const spinBtn=document.getElementById("spinBtn");
const slot=document.getElementById("slot");
const result=document.getElementById("result");
const pinBox=document.getElementById("pinBox");
const waBtn=document.getElementById("waBtn");

let customerMobile="";
let currentPIN="";
let currentReward=null;

// ===== STEP 1 =====
continueBtn.onclick=()=>{
if(mobileInput.value.length<8){
alert("Enter valid mobile number");
return;
}
customerMobile=mobileInput.value;
stepMobile.classList.add("hidden");
stepSpin.classList.remove("hidden");
};

// ===== SPIN =====
spinBtn.onclick=()=>{
spinBtn.disabled=true;

let spins=15;
let interval=setInterval(()=>{
slot.innerText=COMMON[Math.floor(Math.random()*COMMON.length)].text;
spins--;
if(spins===0){
clearInterval(interval);
showWin();
}
},100);
};

function pickReward(){
let r=Math.random();
if(r<0.70) return COMMON[Math.floor(Math.random()*COMMON.length)];
if(r<0.95) return RARE[Math.floor(Math.random()*RARE.length)];
return ULTRA[Math.floor(Math.random()*ULTRA.length)];
}

function showWin(){
currentReward=pickReward();
result.innerText="YOU WON:\n"+currentReward.text+"\nCODE: "+currentReward.code;

currentPIN=Math.floor(100000+Math.random()*900000).toString();
pinBox.innerText="ORDER PIN: "+currentPIN;
pinBox.classList.remove("hidden");

waBtn.classList.remove("hidden");

waBtn.onclick=()=>{
localStorage.setItem("orderPIN",currentPIN);
localStorage.setItem("orderMobile",customerMobile);

window.open(
WHATSAPP_LINK+
"?text="+encodeURIComponent(
"Order Request\nReward: "+currentReward.text+
"\nCoupon Code: "+currentReward.code+
"\nPIN: "+currentPIN+
"\nMobile: "+customerMobile
)
);
};
}
</script>

</body>
</html>
